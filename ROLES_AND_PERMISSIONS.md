# ISTExpert: –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### 1. **–°—É–ø–µ—Ä-–∞–¥–º–∏–Ω** (`super_admin`)
- –í–ª–∞–¥–µ–ª–µ—Ü –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã ISTExpert
- –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º —Å–∏—Å—Ç–µ–º—ã
- –í–∏–¥–∏—Ç –≤—Å–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –î–æ—Å—Ç—É–ø–Ω–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å `/admin`

#### 2. **–ê–¥–º–∏–Ω –∫–æ–º–ø–∞–Ω–∏–∏** (`company_admin`, `owner`)
- –í–ª–∞–¥–µ–ª–µ—Ü/–¥–∏—Ä–µ–∫—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏
- –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –∫–æ–º–ø–∞–Ω–∏–∏
- –ú–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- –ú–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- **–ù–µ –º–æ–∂–µ—Ç** —É–¥–∞–ª—è—Ç—å –∫–æ–º–ø–∞–Ω–∏—é (—Ç–æ–ª—å–∫–æ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω)

#### 3. **–ú–µ–Ω–µ–¥–∂–µ—Ä** (`user`)
- –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
- **–ù–µ –º–æ–∂–µ—Ç** —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **–ù–µ –º–æ–∂–µ—Ç** —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏

#### 4. **–ú–µ—Ö–∞–Ω–∏–∫** (`mechanic`)
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–ø–∞—Ä–∫–∞
- ‚úÖ –¢–û –∏ —Ä–µ–º–æ–Ω—Ç (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)
- ‚úÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¢–û (–ø—Ä–æ—Å–º–æ—Ç—Ä)
- ‚úÖ –°–Ω–∞–±–∂–µ–Ω–∏–µ (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫)
- ‚úÖ –¢–æ–ø–ª–∏–≤–æ (–∑–∞–ø–∏—Å—å –∑–∞–ø—Ä–∞–≤–æ–∫)
- ‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

#### 5. **–í–æ–¥–∏—Ç–µ–ª—å** (`driver`)
- ‚úÖ –ê–≤—Ç–æ–ø–∞—Ä–∫ (–ø—Ä–æ—Å–º–æ—Ç—Ä)
- ‚úÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¢–û (–ø—Ä–æ—Å–º–æ—Ç—Ä)
- ‚úÖ –¢–æ–ø–ª–∏–≤–æ (–∑–∞–ø–∏—Å—å –∑–∞–ø—Ä–∞–≤–æ–∫)
- ‚úÖ –ü–æ–ª–æ–º–∫–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ç–æ–≤)
- ‚ùå –¢–û –∏ —Ä–µ–º–æ–Ω—Ç (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚ùå –°–Ω–∞–±–∂–µ–Ω–∏–µ
- ‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

#### 6. **–°–Ω–∞–±–∂–µ–Ω–µ—Ü** (`procurement`)
- ‚úÖ –ê–≤—Ç–æ–ø–∞—Ä–∫ (–ø—Ä–æ—Å–º–æ—Ç—Ä)
- ‚úÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¢–û (–ø—Ä–æ—Å–º–æ—Ç—Ä)
- ‚úÖ –°–Ω–∞–±–∂–µ–Ω–∏–µ (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)
- ‚úÖ –¢–æ–ø–ª–∏–≤–æ (–ø—Ä–æ—Å–º–æ—Ç—Ä)
- ‚ùå –¢–û –∏ —Ä–µ–º–æ–Ω—Ç
- ‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://supabase.com/dashboard/project/plsaqkfxrrtgnrhmmcho/sql/new
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `rls-policies-fixed.sql`
3. –í—Å—Ç–∞–≤—å—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173/login
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω:
   - Email: `maxyax@gmail.com`
   - –ü–∞—Ä–æ–ª—å: `123456`
3. –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å `/admin`

### –®–∞–≥ 3: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∫–æ–º–ø–∞–Ω–∏—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173/register
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - –ö–æ–º–ø–∞–Ω–∏—è: –û–û–û "–¢–µ—Å—Ç"
   - –ò–ù–ù: 1234567890
   - Email: `test@company.ru`
   - –ü–∞—Ä–æ–ª—å: `test123`
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email (–ø–∏—Å—å–º–æ –æ—Ç Supabase)
4. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É

### –®–∞–≥ 4: –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω –∫–æ–º–ø–∞–Ω–∏–∏ (`test@company.ru`)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**
3. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
   - **–ú–µ—Ö–∞–Ω–∏–∫**: `mechanic@test.ru`, —Ä–æ–ª—å "–ú–µ—Ö–∞–Ω–∏–∫"
   - **–í–æ–¥–∏—Ç–µ–ª—å**: `driver@test.ru`, —Ä–æ–ª—å "–í–æ–¥–∏—Ç–µ–ª—å"
   - **–°–Ω–∞–±–∂–µ–Ω–µ—Ü**: `supply@test.ru`, —Ä–æ–ª—å "–°–Ω–∞–±–∂–µ–Ω–µ—Ü"

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

1. –í—ã–π–¥–∏—Ç–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ **–ú–µ—Ö–∞–Ω–∏–∫** (`mechanic@test.ru`)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∏–¥–∏—Ç: –î–∞—à–±–æ—Ä–¥, –ê–≤—Ç–æ–ø–∞—Ä–∫, –¢–û –∏ –†–µ–º–æ–Ω—Ç, –ö–∞–ª–µ–Ω–¥–∞—Ä—å, –°–Ω–∞–±–∂–µ–Ω–∏–µ, –¢–æ–ø–ª–∏–≤–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ –≤–∏–¥–∏—Ç: –ù–∞—Å—Ç—Ä–æ–π–∫–∏
3. –í—ã–π–¥–∏—Ç–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
4. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ **–í–æ–¥–∏—Ç–µ–ª—å** (`driver@test.ru`)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∏–¥–∏—Ç: –î–∞—à–±–æ—Ä–¥, –ê–≤—Ç–æ–ø–∞—Ä–∫, –ö–∞–ª–µ–Ω–¥–∞—Ä—å, –¢–æ–ø–ª–∏–≤–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ –≤–∏–¥–∏—Ç: –¢–û –∏ –†–µ–º–æ–Ω—Ç, –°–Ω–∞–±–∂–µ–Ω–∏–µ, –ù–∞—Å—Ç—Ä–æ–π–∫–∏

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `types.ts` | –û–±–Ω–æ–≤–ª—ë–Ω enum `UserRole` —Å –Ω–æ–≤—ã–º–∏ —Ä–æ–ª—è–º–∏ |
| `utils/permissions.ts` | –•—É–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ |
| `Layout.tsx` | –°–∫—Ä—ã—Ç–∏–µ –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é –ø–æ —Ä–æ–ª—è–º |
| `CompanySettings.tsx` | –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π |
| `useAuthStore.ts` | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ä–æ–ª–∏ –≤ —Å—Ç–æ—Ä–µ |
| `rls-policies-fixed.sql` | SQL –¥–ª—è RLS –ø–æ–ª–∏—Ç–∏–∫ |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```typescript
interface Permissions {
  canViewDashboard: boolean;      // –í—Å–µ –≤–∏–¥—è—Ç
  canViewEquipment: boolean;      // –í—Å–µ –≤–∏–¥—è—Ç
  canEditEquipment: boolean;      // –ê–¥–º–∏–Ω, –ú–µ–Ω–µ–¥–∂–µ—Ä, –ú–µ—Ö–∞–Ω–∏–∫
  canViewMaintenance: boolean;    // –ê–¥–º–∏–Ω, –ú–µ–Ω–µ–¥–∂–µ—Ä, –ú–µ—Ö–∞–Ω–∏–∫
  canEditMaintenance: boolean;    // –ê–¥–º–∏–Ω, –ú–µ–Ω–µ–¥–∂–µ—Ä, –ú–µ—Ö–∞–Ω–∏–∫
  canViewCalendar: boolean;       // –í—Å–µ –≤–∏–¥—è—Ç
  canViewProcurement: boolean;    // –í—Å–µ –≤–∏–¥—è—Ç
  canEditProcurement: boolean;    // –ê–¥–º–∏–Ω, –ú–µ–Ω–µ–¥–∂–µ—Ä, –°–Ω–∞–±–∂–µ–Ω–µ—Ü, –ú–µ—Ö–∞–Ω–∏–∫
  canViewFuel: boolean;           // –í—Å–µ –≤–∏–¥—è—Ç
  canEditFuel: boolean;           // –ê–¥–º–∏–Ω, –ú–µ–Ω–µ–¥–∂–µ—Ä, –í–æ–¥–∏—Ç–µ–ª—å, –ú–µ—Ö–∞–Ω–∏–∫
  canViewSettings: boolean;       // –¢–æ–ª—å–∫–æ –ê–¥–º–∏–Ω –∫–æ–º–ø–∞–Ω–∏–∏
  canEditSettings: boolean;       // –¢–æ–ª—å–∫–æ –ê–¥–º–∏–Ω –∫–æ–º–ø–∞–Ω–∏–∏
  canManageUsers: boolean;        // –¢–æ–ª—å–∫–æ –ê–¥–º–∏–Ω –∫–æ–º–ø–∞–Ω–∏–∏
}
```

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –Ω—É–∂–Ω–æ:

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É email** –≤ Supabase (—Å–µ–π—á–∞—Å –ø–∏—Å—å–º–∞ –º–æ–≥—É—Ç –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å)
2. **–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã** –¥–ª—è:
   - –ü—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Å–µ–π—á–∞—Å –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ)
4. **–î–æ–±–∞–≤–∏—Ç—å RLS** –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü (maintenance_records, breakdowns –∏ —Ç.–¥.)
5. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø–ª–∞—Ç—É** (–ÆKassa, CloudPayments)

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F12 ‚Üí Console)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –§–µ–≤—Ä–∞–ª—å 2026
**–í–µ—Ä—Å–∏—è:** 3.0 (Multi-role SaaS)
